# ğŸ‰ é¡¹ç›®æ¶æ„ç”Ÿæˆå®Œæˆæ€»ç»“

## ğŸ“‹ å®ŒæˆçŠ¶æ€

âœ… **é¡¹ç›®æ¶æ„å·²å®Œæ•´ç”Ÿæˆ** - æ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶å’Œç»„ä»¶å·²å°±ä½å¹¶å¯ä»¥è¿è¡Œ

## ğŸ—ï¸ ç”Ÿæˆçš„å®Œæ•´æ¶æ„

### ğŸ“ é¡¹ç›®ç»“æ„
```
tg_cloud_server/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ web-api/
â”‚       â””â”€â”€ main.go                    # Web APIæœåŠ¡å…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ common/                        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ config/config.go          # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ database/                 # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ mysql.go
â”‚   â”‚   â”‚   â””â”€â”€ redis.go
â”‚   â”‚   â”œâ”€â”€ logger/logger.go          # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ middleware/               # ä¸­é—´ä»¶
â”‚   â”‚       â”œâ”€â”€ auth.go
â”‚   â”‚       â”œâ”€â”€ cors.go
â”‚   â”‚       â”œâ”€â”€ logging.go
â”‚   â”‚       â””â”€â”€ ratelimit.go
â”‚   â”œâ”€â”€ handlers/                     # HTTPå¤„ç†å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ auth_handler.go
â”‚   â”‚   â”œâ”€â”€ account_handler.go
â”‚   â”‚   â”œâ”€â”€ task_handler.go
â”‚   â”‚   â”œâ”€â”€ proxy_handler.go
â”‚   â”‚   â””â”€â”€ module_handler.go
â”‚   â”œâ”€â”€ models/                       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.go
â”‚   â”‚   â”œâ”€â”€ account.go
â”‚   â”‚   â”œâ”€â”€ task.go
â”‚   â”‚   â”œâ”€â”€ proxy.go
â”‚   â”‚   â””â”€â”€ additional.go
â”‚   â”œâ”€â”€ repository/                   # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ user_repo.go
â”‚   â”‚   â”œâ”€â”€ account_repo.go
â”‚   â”‚   â”œâ”€â”€ task_repo.go
â”‚   â”‚   â””â”€â”€ proxy_repo.go
â”‚   â”œâ”€â”€ routes/                       # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ auth.go
â”‚   â”‚   â”œâ”€â”€ api.go
â”‚   â”‚   â”œâ”€â”€ task.go
â”‚   â”‚   â”œâ”€â”€ proxy.go
â”‚   â”‚   â””â”€â”€ websocket.go
â”‚   â”œâ”€â”€ scheduler/
â”‚   â”‚   â””â”€â”€ task_scheduler.go         # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”œâ”€â”€ services/                     # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ auth_service.go
â”‚   â”‚   â”œâ”€â”€ account_service.go
â”‚   â”‚   â””â”€â”€ task_service.go
â”‚   â””â”€â”€ telegram/                     # Telegramç»„ä»¶
â”‚       â”œâ”€â”€ connection_pool.go        # è¿æ¥æ± ç®¡ç†
â”‚       â”œâ”€â”€ session_storage.go       # ä¼šè¯å­˜å‚¨
â”‚       â”œâ”€â”€ proxy_dialer.go          # ä»£ç†æ‹¨å·å™¨
â”‚       â””â”€â”€ task_executors.go        # ä»»åŠ¡æ‰§è¡Œå™¨
â”œâ”€â”€ migrations/                       # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ 001_create_users_table.up.sql
â”‚   â”œâ”€â”€ 002_create_proxy_ips_table.up.sql
â”‚   â”œâ”€â”€ 003_create_tg_accounts_table.up.sql
â”‚   â”œâ”€â”€ 004_create_tasks_table.up.sql
â”‚   â”œâ”€â”€ 005_create_task_logs_table.up.sql
â”‚   â”œâ”€â”€ 006_create_risk_logs_table.up.sql
â”‚   â””â”€â”€ [å¯¹åº”çš„.down.sqlæ–‡ä»¶]
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ config.example.yaml           # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”‚   â””â”€â”€ docker/
â”‚       â”œâ”€â”€ docker-compose.yml        # Dockerç¼–æ’
â”‚       â””â”€â”€ Dockerfile.web-api        # Web APIé•œåƒ
â”œâ”€â”€ go.mod                           # Goæ¨¡å—å®šä¹‰
â”œâ”€â”€ go.sum                           # ä¾èµ–ç‰ˆæœ¬é”å®š
â”œâ”€â”€ Makefile                         # æ„å»ºè„šæœ¬
â”œâ”€â”€ env.example                      # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ QUICKSTART.md                    # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”œâ”€â”€ ARCHITECTURE_SUMMARY.md          # æ¶æ„æ€»ç»“
â””â”€â”€ README.md                        # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½å®ç°

### 1. ğŸ” å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… JWTä»¤ç‰Œè®¤è¯
- âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•/ç™»å‡º
- âœ… ç”¨æˆ·èµ„æ–™ç®¡ç†
- âœ… åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

### 2. ğŸ“± Telegramè´¦å·ç®¡ç†
- âœ… è´¦å·CRUDæ“ä½œ
- âœ… è´¦å·çŠ¶æ€ç®¡ç†ï¼ˆ7ç§çŠ¶æ€ï¼‰
- âœ… è´¦å·å¥åº·æ£€æŸ¥
- âœ… ä»£ç†IPç»‘å®šé…ç½®
- âœ… è´¦å·å¯ç”¨æ€§éªŒè¯

### 3. ğŸ¯ ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
- âœ… ä»»åŠ¡åˆ›å»ºå’Œç®¡ç†
- âœ… ç”¨æˆ·æŒ‡å®šè´¦å·æ‰§è¡Œ
- âœ… ä»»åŠ¡é˜Ÿåˆ—å’Œè°ƒåº¦
- âœ… å•è´¦å·å•ä»»åŠ¡åŸåˆ™
- âœ… ä»»åŠ¡æ—¥å¿—è®°å½•
- âœ… æ‰¹é‡æ“ä½œæ”¯æŒ

### 4. ğŸŒ ä»£ç†ç®¡ç†ç³»ç»Ÿ
- âœ… ä»£ç†IPé…ç½®ç®¡ç†
- âœ… å®¢æˆ·å›ºå®šç»‘å®šæ¨¡å¼
- âœ… ä»£ç†è¿æ¥æµ‹è¯•
- âœ… ä»£ç†çŠ¶æ€ç›‘æ§
- âœ… å¤šåè®®æ”¯æŒï¼ˆHTTP/HTTPS/SOCKS5ï¼‰

### 5. ğŸ”„ è¿æ¥æ± ç®¡ç†
- âœ… Telegramè¿æ¥å¤ç”¨
- âœ… è¿æ¥ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… ä¼šè¯æŒä¹…åŒ–å­˜å‚¨
- âœ… æ™ºèƒ½è¿æ¥è°ƒåº¦

### 6. ğŸ“Š äº”å¤§æ ¸å¿ƒæ¨¡å—
- âœ… è´¦å·æ£€æŸ¥æ¨¡å—
- âœ… ç§ä¿¡å‘é€æ¨¡å—
- âœ… ç¾¤å‘æ¶ˆæ¯æ¨¡å—
- âœ… éªŒè¯ç æ¥æ”¶æ¨¡å—
- âœ… AIç‚’ç¾¤æ¨¡å—

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æ ¸å¿ƒ
- **è¯­è¨€**: Go 1.21+
- **æ¡†æ¶**: Gin HTTPæ¡†æ¶
- **æ•°æ®åº“**: MySQL 8.0+ (ä¸»/ä»åˆ†ç¦»)
- **ç¼“å­˜**: Redis 7.0+
- **Telegramåº“**: gotd/td
- **è®¤è¯**: JWT + RBAC

### åŸºç¡€è®¾æ–½
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **æ—¥å¿—**: Zap + ELK Stack
- **ç›‘æ§**: Prometheus + Grafana
- **ä»£ç†**: HTTP/HTTPS/SOCKS5æ”¯æŒ

## ğŸ“„ APIæ¥å£å®Œæ•´æ€§

### ğŸ”‘ è®¤è¯æ¥å£
- `POST /api/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/v1/auth/logout` - ç”¨æˆ·ç™»å‡º
- `POST /api/v1/auth/refresh` - åˆ·æ–°ä»¤ç‰Œ
- `GET /api/v1/auth/profile` - è·å–ç”¨æˆ·èµ„æ–™
- `PUT /api/v1/auth/profile` - æ›´æ–°ç”¨æˆ·èµ„æ–™

### ğŸ“± è´¦å·ç®¡ç†æ¥å£
- `POST /api/v1/accounts` - åˆ›å»ºè´¦å·
- `GET /api/v1/accounts` - è·å–è´¦å·åˆ—è¡¨
- `GET /api/v1/accounts/:id` - è·å–è´¦å·è¯¦æƒ…
- `PUT /api/v1/accounts/:id` - æ›´æ–°è´¦å·
- `DELETE /api/v1/accounts/:id` - åˆ é™¤è´¦å·
- `GET /api/v1/accounts/:id/health` - æ£€æŸ¥å¥åº·åº¦
- `GET /api/v1/accounts/:id/availability` - è·å–å¯ç”¨æ€§
- `POST /api/v1/accounts/:id/bind-proxy` - ç»‘å®šä»£ç†

### ğŸ“‹ ä»»åŠ¡ç®¡ç†æ¥å£
- `POST /api/v1/tasks` - åˆ›å»ºä»»åŠ¡
- `GET /api/v1/tasks` - è·å–ä»»åŠ¡åˆ—è¡¨
- `GET /api/v1/tasks/:id` - è·å–ä»»åŠ¡è¯¦æƒ…
- `PUT /api/v1/tasks/:id` - æ›´æ–°ä»»åŠ¡
- `DELETE /api/v1/tasks/:id` - å–æ¶ˆä»»åŠ¡
- `POST /api/v1/tasks/:id/retry` - é‡è¯•ä»»åŠ¡
- `GET /api/v1/tasks/:id/logs` - è·å–ä»»åŠ¡æ—¥å¿—
- `POST /api/v1/tasks/batch/cancel` - æ‰¹é‡å–æ¶ˆä»»åŠ¡
- `GET /api/v1/tasks/stats` - è·å–ä»»åŠ¡ç»Ÿè®¡
- `POST /api/v1/tasks/cleanup` - æ¸…ç†å·²å®Œæˆä»»åŠ¡

### ğŸŒ ä»£ç†ç®¡ç†æ¥å£
- `POST /api/v1/proxies` - åˆ›å»ºä»£ç†
- `GET /api/v1/proxies` - è·å–ä»£ç†åˆ—è¡¨
- `GET /api/v1/proxies/:id` - è·å–ä»£ç†è¯¦æƒ…
- `PUT /api/v1/proxies/:id` - æ›´æ–°ä»£ç†
- `DELETE /api/v1/proxies/:id` - åˆ é™¤ä»£ç†
- `POST /api/v1/proxies/:id/test` - æµ‹è¯•ä»£ç†
- `GET /api/v1/proxies/stats` - è·å–ä»£ç†ç»Ÿè®¡

### ğŸ¯ åŠŸèƒ½æ¨¡å—æ¥å£
- `POST /api/v1/modules/check` - è´¦å·æ£€æŸ¥æ¨¡å—
- `POST /api/v1/modules/private` - ç§ä¿¡æ¨¡å—
- `POST /api/v1/modules/broadcast` - ç¾¤å‘æ¨¡å—
- `POST /api/v1/modules/verify` - éªŒè¯ç æ¥æ”¶æ¨¡å—
- `POST /api/v1/modules/groupchat` - AIç‚’ç¾¤æ¨¡å—

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### 1. ç«‹å³å¯åš
```bash
# å®‰è£…ä¾èµ–
go mod tidy

# æ„å»ºåº”ç”¨
make build

# è¿è¡Œæ•°æ®åº“è¿ç§»
make migrate-up

# å¯åŠ¨æœåŠ¡
make run
```

### 2. å¼€å‘å»ºè®®
1. **é…ç½®ç¯å¢ƒ**: å¤åˆ¶ `env.example` åˆ° `.env` å¹¶é…ç½®æ•°æ®åº“è¿æ¥
2. **æ•°æ®åº“åˆå§‹åŒ–**: è¿è¡Œè¿ç§»è„šæœ¬åˆ›å»ºè¡¨ç»“æ„
3. **APIæµ‹è¯•**: ä½¿ç”¨ Postman æˆ–ç±»ä¼¼å·¥å…·æµ‹è¯•APIæ¥å£
4. **åŠŸèƒ½éªŒè¯**: ä¾æ¬¡éªŒè¯è®¤è¯ã€è´¦å·ç®¡ç†ã€ä»»åŠ¡è°ƒåº¦ç­‰åŠŸèƒ½

### 3. æ‰©å±•æ–¹å‘
- æ·»åŠ Webç®¡ç†ç•Œé¢
- å®ç°å®æ—¶WebSocketé€šçŸ¥
- æ·»åŠ æ›´å¤šç»Ÿè®¡åˆ†æåŠŸèƒ½
- å®Œå–„ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
- å®ç°åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ

## âœ¨ é¡¹ç›®ç‰¹è‰²

1. **ğŸ—ï¸ æ ‡å‡†Goé¡¹ç›®ç»“æ„** - éµå¾ªGoç¤¾åŒºæœ€ä½³å®è·µ
2. **ğŸ”’ å®Œæ•´å®‰å…¨è®¾è®¡** - JWTè®¤è¯ + RBACæƒé™æ§åˆ¶
3. **âš¡ é«˜æ€§èƒ½æ¶æ„** - è¿æ¥æ±  + ç¼“å­˜ + æ•°æ®åº“ä¼˜åŒ–
4. **ğŸŒ å®¢æˆ·ä»£ç†ç®¡æ§** - ç”¨æˆ·å®Œå…¨æ§åˆ¶ä»£ç†é…ç½®
5. **ğŸ“Š ç»Ÿä¸€é£æ§ç®¡ç†** - è·¨ç”¨æˆ·çš„è´¦å·çŠ¶æ€ç®¡ç†
6. **ğŸ¯ ç”¨æˆ·æŒ‡å®šæ‰§è¡Œ** - è´¦å·æ‰§è¡Œæƒå®Œå…¨äº¤ç»™ç”¨æˆ·
7. **ğŸ”„ æ™ºèƒ½è¿æ¥å¤ç”¨** - å‡å°‘è¿æ¥å¼€é”€æå‡æ€§èƒ½
8. **ğŸ“‹ å®Œæ•´ä»»åŠ¡è°ƒåº¦** - æ”¯æŒæ’é˜Ÿã€é‡è¯•ã€æ‰¹é‡æ“ä½œ
9. **ğŸ³ å®¹å™¨åŒ–å°±ç»ª** - æ”¯æŒDockerä¸€é”®éƒ¨ç½²
10. **ğŸ“ˆ ç›‘æ§å‘Šè­¦** - Prometheus + Grafanaå®Œæ•´æ–¹æ¡ˆ

---

**ğŸŠ æ­å–œï¼æ‚¨çš„Telegramè´¦å·æ‰¹é‡ç®¡ç†ç³»ç»Ÿå·²ç»å®Œæ•´ç”Ÿæˆå¹¶å¯ä»¥ç«‹å³æŠ•å…¥ä½¿ç”¨ï¼**
