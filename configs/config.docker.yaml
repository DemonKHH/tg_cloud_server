# TG Cloud Server Docker 环境配置文件
# 此文件用于 Docker 环境，数据库和 Redis 使用服务名连接

# 服务配置
server:
  web_api:
    host: "0.0.0.0"
    port: 8080

# 数据库配置（Docker 环境）
database:
  mysql:
    host: "mysql"  # Docker Compose 服务名
    port: 3306
    username: "tg_user"
    password: "tg_pass123"
    database: "tg_manager"
    max_open_conns: 100
    max_idle_conns: 10
    max_lifetime: "1h"
  redis:
    host: "redis"  # Docker Compose 服务名
    port: 6379
    password: ""
    database: 0
    pool_size: 10

# Telegram配置
telegram:
  api_id: 2024
  api_hash: "b18441a1ff607e10a989891a5462e627"
  connection_pool:
    max_connections: 1000
    idle_timeout: "30m"
    cleanup_interval: "5m"
  rate_limit:
    messages_per_minute: 30
    burst_size: 5
    cooldown_duration: "1m"

# AI配置
ai:
  openai:
    api_key: "${OPENAI_API_KEY}"
    model: "gpt-3.5-turbo"
    max_tokens: 1000
    temperature: 0.7
    timeout: "30s"

# 风控配置
risk_control:
  enabled: true
  check_interval: "1m"
  max_failures: 3
  cooldown_duration: "30m"
  health_threshold: 0.3

# 日志配置
logging:
  level: "info"
  format: "json"
  output: "stdout"
  filename: "logs/app.log"
  max_size: 100
  max_backups: 3
  max_age: 28
  compress: true
  files:
    error_log: "logs/error.log"
    warn_log: "logs/warn.log"
    info_log: "logs/info.log"
    debug_log: "logs/debug.log"
    task_log: "logs/task.log"
    api_log: "logs/api.log"

# JWT配置
jwt:
  secret_key: "your_jwt_secret_key_change_this_in_production"
  expiration_time: "24h"
  refresh_time: "168h"
